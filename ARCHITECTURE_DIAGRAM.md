# ğŸ—ï¸ Architecture Diagram - ContextPanel Integration

## System Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         TripPeIndia Frontend                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                      App.jsx (Root)                      â”‚  â”‚
â”‚  â”‚                                                          â”‚  â”‚
â”‚  â”‚  State:                                                  â”‚  â”‚
â”‚  â”‚  â€¢ messages: Message[]                                   â”‚  â”‚
â”‚  â”‚  â€¢ input: string                                         â”‚  â”‚
â”‚  â”‚  â€¢ loading: boolean                                      â”‚  â”‚
â”‚  â”‚  â€¢ context: TripContext                                  â”‚  â”‚
â”‚  â”‚  â€¢ conversationId: string                                â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                              â”‚                                  â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚         â”‚                    â”‚                    â”‚             â”‚
â”‚         â–¼                    â–¼                    â–¼             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  ContextPanel   â”‚  â”‚  Chat Interface â”‚  â”‚   Header     â”‚   â”‚
â”‚  â”‚                 â”‚  â”‚                 â”‚  â”‚              â”‚   â”‚
â”‚  â”‚ â€¢ Destination   â”‚  â”‚ â€¢ Messages      â”‚  â”‚ â€¢ Logo       â”‚   â”‚
â”‚  â”‚ â€¢ Dates         â”‚  â”‚ â€¢ Input Area    â”‚  â”‚ â€¢ Context    â”‚   â”‚
â”‚  â”‚ â€¢ Budget        â”‚  â”‚ â€¢ Send Button   â”‚  â”‚ â€¢ Clear Btn  â”‚   â”‚
â”‚  â”‚ â€¢ Travelers     â”‚  â”‚ â€¢ Loading       â”‚  â”‚              â”‚   â”‚
â”‚  â”‚ â€¢ Interests     â”‚  â”‚                 â”‚  â”‚              â”‚   â”‚
â”‚  â”‚ â€¢ Preferences   â”‚  â”‚                 â”‚  â”‚              â”‚   â”‚
â”‚  â”‚ â€¢ Plan Trip     â”‚  â”‚                 â”‚  â”‚              â”‚   â”‚
â”‚  â”‚                 â”‚  â”‚                 â”‚  â”‚              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚         â”‚                    â”‚                                  â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚                              â”‚                    â”‚             â”‚
â”‚                              â–¼                    â–¼             â”‚
â”‚                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚                      â”‚  ChatMessage     â”‚  â”‚ PDFExport    â”‚    â”‚
â”‚                      â”‚                  â”‚  â”‚ Button       â”‚    â”‚
â”‚                      â”‚ â€¢ Markdown       â”‚  â”‚              â”‚    â”‚
â”‚                      â”‚ â€¢ Timestamps     â”‚  â”‚ â€¢ Detect PDF â”‚    â”‚
â”‚                      â”‚ â€¢ Animations     â”‚  â”‚ â€¢ Download   â”‚    â”‚
â”‚                      â”‚                  â”‚  â”‚              â”‚    â”‚
â”‚                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Interest System Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Interests System                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  Preset Interests    â”‚    â”‚  Custom Interests    â”‚    â”‚
â”‚  â”‚  (8 Options)         â”‚    â”‚  (Unlimited)         â”‚    â”‚
â”‚  â”‚                      â”‚    â”‚                      â”‚    â”‚
â”‚  â”‚  â€¢ History      [âœ“]  â”‚    â”‚  Input Field:        â”‚    â”‚
â”‚  â”‚  â€¢ Nature       [ ]   â”‚    â”‚  photography,        â”‚    â”‚
â”‚  â”‚  â€¢ Beaches      [âœ“]   â”‚    â”‚  wildlife, yoga      â”‚    â”‚
â”‚  â”‚  â€¢ Food         [âœ“]   â”‚    â”‚                      â”‚    â”‚
â”‚  â”‚  â€¢ Nightlife    [ ]   â”‚    â”‚  Preview Tags:       â”‚    â”‚
â”‚  â”‚  â€¢ Spirituality [ ]   â”‚    â”‚  [photography]       â”‚    â”‚
â”‚  â”‚  â€¢ Adventure    [ ]   â”‚    â”‚  [wildlife]          â”‚    â”‚
â”‚  â”‚  â€¢ Shopping     [ ]   â”‚    â”‚  [yoga]              â”‚    â”‚
â”‚  â”‚                      â”‚    â”‚                      â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚           â”‚                           â”‚                   â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                           â”‚                               â”‚
â”‚                           â–¼                               â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚              â”‚  Combined Interests    â”‚                   â”‚
â”‚              â”‚                        â”‚                   â”‚
â”‚              â”‚ [history, beaches,     â”‚                   â”‚
â”‚              â”‚  food, photography,    â”‚                   â”‚
â”‚              â”‚  wildlife, yoga]       â”‚                   â”‚
â”‚              â”‚                        â”‚                   â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                           â”‚                               â”‚
â”‚                           â–¼                               â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚              â”‚  Context Message       â”‚                   â”‚
â”‚              â”‚                        â”‚                   â”‚
â”‚              â”‚ "I'm interested in     â”‚                   â”‚
â”‚              â”‚  history, beaches,     â”‚                   â”‚
â”‚              â”‚  food, photography,    â”‚                   â”‚
â”‚              â”‚  wildlife, yoga..."    â”‚                   â”‚
â”‚              â”‚                        â”‚                   â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Data Flow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      User Interaction                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              ContextPanel Input Events                       â”‚
â”‚  â€¢ onChange for text inputs                                 â”‚
â”‚  â€¢ onClick for preset interest buttons                      â”‚
â”‚  â€¢ onChange for custom interests input                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  updateContext(key, value)                  â”‚
â”‚  Updates state: setContext(prev => {...prev, [key]: value}) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    State Updated                            â”‚
â”‚  context = {                                                â”‚
â”‚    destination: "Jaipur",                                   â”‚
â”‚    startDate: "2025-12-15",                                 â”‚
â”‚    endDate: "2025-12-20",                                   â”‚
â”‚    budgetInr: 50000,                                        â”‚
â”‚    adults: 2,                                               â”‚
â”‚    children: 1,                                             â”‚
â”‚    interests: ["history", "food", "shopping"],              â”‚
â”‚    otherInterests: "photography, wildlife, yoga",           â”‚
â”‚    hotelClass: "mid-range",                                 â”‚
â”‚    diet: "vegetarian"                                       â”‚
â”‚  }                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            UI Re-renders with Updated State                 â”‚
â”‚  â€¢ Preset interest buttons show selection state             â”‚
â”‚  â€¢ Custom interests display as tags                         â”‚
â”‚  â€¢ Form fields show current values                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         User Clicks "Plan My Trip" Button                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              handlePlanTrip() Validation                    â”‚
â”‚  â€¢ Check destination âœ“                                      â”‚
â”‚  â€¢ Check startDate âœ“                                        â”‚
â”‚  â€¢ Check endDate âœ“                                          â”‚
â”‚  â€¢ Check budgetInr âœ“                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Combine Preset + Custom Interests                   â”‚
â”‚  interestsList = [                                          â”‚
â”‚    ...context.interests,                                    â”‚
â”‚    ...context.otherInterests.split(',').map(i => i.trim()) â”‚
â”‚  ]                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Build Context Message                               â”‚
â”‚  "I'm planning a trip to Jaipur from 2025-12-15 to         â”‚
â”‚   2025-12-20 for 2 adults and 1 children with a budget     â”‚
â”‚   of â‚¹50,000. I'm interested in history, food, shopping,   â”‚
â”‚   photography, wildlife, yoga. I prefer mid-range hotels.  â”‚
â”‚   My dietary preference is vegetarian. Please help me       â”‚
â”‚   plan an amazing itinerary!"                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Create User Message Object                          â”‚
â”‚  {                                                          â”‚
â”‚    id: 2,                                                   â”‚
â”‚    text: "I'm planning a trip to...",                       â”‚
â”‚    sender: 'user',                                          â”‚
â”‚    timestamp: new Date()                                    â”‚
â”‚  }                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Add Message to Chat                                 â”‚
â”‚  setMessages(prev => [...prev, userMessage])               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Send to Backend                                     â”‚
â”‚  POST /api/chat                                             â”‚
â”‚  {                                                          â”‚
â”‚    message: "I'm planning a trip to...",                    â”‚
â”‚    conversationId: "conv_xxx_yyy",                          â”‚
â”‚    context: { destination, dates, budget, ... }            â”‚
â”‚  }                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Backend Processing                                  â”‚
â”‚  â€¢ Parse request                                            â”‚
â”‚  â€¢ Extract context                                          â”‚
â”‚  â€¢ Generate AI response                                     â”‚
â”‚  â€¢ Return response                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Receive Response                                    â”‚
â”‚  {                                                          â”‚
â”‚    success: true,                                           â”‚
â”‚    data: {                                                  â”‚
â”‚      response: "Great! I can help you plan...",             â”‚
â”‚      functionCallsMade: 2,                                  â”‚
â”‚      data: { hotels: [...], attractions: [...] }           â”‚
â”‚    }                                                        â”‚
â”‚  }                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Create Bot Message Object                           â”‚
â”‚  {                                                          â”‚
â”‚    id: 3,                                                   â”‚
â”‚    text: "Great! I can help you plan...",                   â”‚
â”‚    sender: 'bot',                                           â”‚
â”‚    timestamp: new Date(),                                   â”‚
â”‚    functionCalls: 2,                                        â”‚
â”‚    data: { hotels: [...], attractions: [...] }             â”‚
â”‚  }                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Add Bot Message to Chat                             â”‚
â”‚  setMessages(prev => [...prev, botMessage])                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Display in Chat Interface                           â”‚
â”‚  â€¢ Render all messages                                      â”‚
â”‚  â€¢ Apply markdown rendering                                â”‚
â”‚  â€¢ Show loading state                                       â”‚
â”‚  â€¢ Auto-scroll to latest                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         User Sees Response                                  â”‚
â”‚  â€¢ Chat message displayed                                   â”‚
â”‚  â€¢ Context preserved                                        â”‚
â”‚  â€¢ Can continue conversation                                â”‚
â”‚  â€¢ Can modify preferences                                   â”‚
â”‚  â€¢ Can clear and start new trip                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Component Hierarchy

```
App
â”œâ”€â”€ Header
â”‚   â”œâ”€â”€ Logo & Title
â”‚   â”œâ”€â”€ Trip Context Display
â”‚   â”‚   â”œâ”€â”€ Destination (if set)
â”‚   â”‚   â””â”€â”€ Start Date (if set)
â”‚   â””â”€â”€ Clear Button
â”‚
â”œâ”€â”€ Main Content
â”‚   â”œâ”€â”€ ContextPanel (Sidebar)
â”‚   â”‚   â”œâ”€â”€ Trip Preferences Header
â”‚   â”‚   â”œâ”€â”€ History Suggestions (if available)
â”‚   â”‚   â”œâ”€â”€ Destination Input
â”‚   â”‚   â”œâ”€â”€ Date Inputs
â”‚   â”‚   â”‚   â”œâ”€â”€ Start Date
â”‚   â”‚   â”‚   â””â”€â”€ End Date
â”‚   â”‚   â”œâ”€â”€ Budget Input
â”‚   â”‚   â”œâ”€â”€ Travelers Inputs
â”‚   â”‚   â”‚   â”œâ”€â”€ Adults
â”‚   â”‚   â”‚   â””â”€â”€ Children
â”‚   â”‚   â”œâ”€â”€ Interests Section
â”‚   â”‚   â”‚   â”œâ”€â”€ Preset Interest Buttons (8)
â”‚   â”‚   â”‚   â””â”€â”€ Custom Interests Input
â”‚   â”‚   â”‚       â””â”€â”€ Tag Preview
â”‚   â”‚   â”œâ”€â”€ Hotel Preference Select
â”‚   â”‚   â”œâ”€â”€ Dietary Preference Select
â”‚   â”‚   â””â”€â”€ Plan Trip Button
â”‚   â”‚
â”‚   â””â”€â”€ Chat Area
â”‚       â”œâ”€â”€ Chat Header
â”‚       â”‚   â”œâ”€â”€ Title
â”‚       â”‚   â””â”€â”€ Message Count
â”‚       â”œâ”€â”€ Messages Container
â”‚       â”‚   â”œâ”€â”€ ChatMessage (multiple)
â”‚       â”‚   â”‚   â”œâ”€â”€ Avatar
â”‚       â”‚   â”‚   â”œâ”€â”€ Message Content
â”‚       â”‚   â”‚   â”‚   â””â”€â”€ Markdown Renderer
â”‚       â”‚   â”‚   â”œâ”€â”€ PDFExportButton (conditional)
â”‚       â”‚   â”‚   â””â”€â”€ Timestamp
â”‚       â”‚   â””â”€â”€ Loading Indicator (conditional)
â”‚       â””â”€â”€ Input Area
â”‚           â”œâ”€â”€ Textarea
â”‚           â”œâ”€â”€ Send Button
â”‚           â””â”€â”€ Keyboard Hints
```

## State Management Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    App Component State                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  messages: Message[]                                        â”‚
â”‚  â”œâ”€â”€ Initial: [welcome message]                             â”‚
â”‚  â”œâ”€â”€ Updated: [welcome, user msg, bot msg, ...]            â”‚
â”‚  â””â”€â”€ Cleared: [welcome message]                             â”‚
â”‚                                                             â”‚
â”‚  input: string                                              â”‚
â”‚  â”œâ”€â”€ Initial: ""                                            â”‚
â”‚  â”œâ”€â”€ Updated: user types                                    â”‚
â”‚  â””â”€â”€ Cleared: after send                                    â”‚
â”‚                                                             â”‚
â”‚  context: TripContext                                       â”‚
â”‚  â”œâ”€â”€ Initial: {}                                            â”‚
â”‚  â”œâ”€â”€ Updated: user fills form                               â”‚
â”‚  â””â”€â”€ Cleared: on clear conversation                         â”‚
â”‚                                                             â”‚
â”‚  loading: boolean                                           â”‚
â”‚  â”œâ”€â”€ Initial: false                                         â”‚
â”‚  â”œâ”€â”€ Set true: on send                                      â”‚
â”‚  â””â”€â”€ Set false: on response                                 â”‚
â”‚                                                             â”‚
â”‚  conversationId: string                                     â”‚
â”‚  â”œâ”€â”€ Initial: null                                          â”‚
â”‚  â”œâ”€â”€ Generated: on first message                            â”‚
â”‚  â””â”€â”€ Cleared: on clear conversation                         â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Context Object Structure

```
TripContext
â”œâ”€â”€ destination: string
â”‚   â””â”€â”€ "Jaipur"
â”œâ”€â”€ startDate: string (YYYY-MM-DD)
â”‚   â””â”€â”€ "2025-12-15"
â”œâ”€â”€ endDate: string (YYYY-MM-DD)
â”‚   â””â”€â”€ "2025-12-20"
â”œâ”€â”€ budgetInr: number
â”‚   â””â”€â”€ 50000
â”œâ”€â”€ adults: number
â”‚   â””â”€â”€ 2
â”œâ”€â”€ children: number
â”‚   â””â”€â”€ 1
â”œâ”€â”€ interests: string[] (Preset)
â”‚   â””â”€â”€ ["history", "food", "shopping"]
â”œâ”€â”€ otherInterests: string (Custom, comma-separated)
â”‚   â””â”€â”€ "photography, wildlife, yoga"
â”œâ”€â”€ hotelClass: string
â”‚   â””â”€â”€ "mid-range"
â””â”€â”€ diet: string
    â””â”€â”€ "vegetarian"
```

---

**Architecture Version**: 1.0.0
**Last Updated**: November 10, 2025
**Status**: Complete
